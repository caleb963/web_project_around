!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function n(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}var r=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.popupElement=document.querySelector(t),this.popupCloseButton=this.popupElement.querySelector(".popup__close-button"),this._handleEscClose=this._handleEscClose.bind(this),this.open=this.open.bind(this),this.close=this.close.bind(this)},(n=[{key:"open",value:function(){this.popupElement.classList.add("popup__opener"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this.popupElement.classList.remove("popup__opener"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_isClickOutside",value:function(e){return e.target.classlist.contains("popup__opener")}},{key:"setEventListeners",value:function(){var e=this;this.popupCloseButton.addEventListener("click",(function(){e.close()})),this.popupElement.addEventListener("click",(function(){e._isClickOutside&&e.close()}))}}])&&t(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}function c(e,t,n){return t=s(t),function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,a()?Reflect.construct(t,n||[],s(e).constructor):t.apply(e,n))}function a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(a=function(){return!!e})()}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},l.apply(this,arguments)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}var f=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=c(this,t,[e])).image=n.popupElement.querySelector(".popup__image"),n.caption=n.popupElement.querySelector(".popup__image-title"),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(t,e),n=t,(r=[{key:"open",value:function(e,n){this.image.src=n,this.image.alt=e,this.caption.textContent=e,l(s(t.prototype),"open",this).call(this)}}])&&i(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(r);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function d(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==m(t)?t:t+""}var b=function(){return e=function e(t,n,r,o){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"_handleLike",(function(){i.card.querySelector(".elements__card-heart").classList.toggle("elements__card-heart_active")})),d(this,"_handleRemoveCard",(function(){i.card.remove()})),d(this,"_handleOpenImageCard",(function(){var e=i.card.querySelector(".elements__card-image"),t=new f("#popup-show-picture");e.addEventListener("click",(function(){t.open(i.title,i.link)}))})),this.title=t,this.link=n,this.template=r,this.handleCardClick=o,this._handleLike=this._handleLike.bind(this),this._handleRemoveCard=this._handleRemoveCard.bind(this),this._handleOpenImageCard=this._handleOpenImageCard.bind(this)},(t=[{key:"_getCardClone",value:function(){this.card=this.template.content.querySelector(".elements__card").cloneNode(!0)}},{key:"_setProperties",value:function(){this.card.querySelector(".elements__card-title").textContent=this.title;var e=this.card.querySelector(".elements__card-image");e.src=this.link,e.alt=this.title}},{key:"setEventListeners",value:function(){var e=this;this.card.querySelector(".elements__card-heart").addEventListener("click",this._handleLike),this.card.querySelector(".elements__card-delete").addEventListener("click",this._handleRemoveCard),this.card.querySelector(".elements__card-image").addEventListener("click",(function(){e._handleOpenImageCard(e.title,e.link)}))}},{key:"generateCard",value:function(){return this._getCardClone(),this._setProperties(),this.setEventListeners(),this.card}}])&&y(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function S(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==h(t)?t:t+""}var E=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.formElement=t,this.formSelector=n.formSelector,this.inputSelector=n.inputSelector,this.submitButtonSelector=n.submitButtonSelector,this.inactiveButtonClass=n.inactiveButtonClass,this.inputErrorClass=n.inputErrorClass,this.errorClass=n.errorClass,this.buttonElement=this.formElement.querySelector(n.submitButtonSelector),this.inputList=Array.from(this.formElement.querySelectorAll(this.inputSelector))},(t=[{key:"_showInputError",value:function(e){var t=this.formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this.inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this.errorClass)}},{key:"_hideInputError",value:function(e){var t=this.formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this.inputErrorClass),t.classList.remove(this.errorClass),t.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_hasInvalidInput",value:function(){return this.inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this.buttonElement.classList.add(this.inactiveButtonClass):this.buttonElement.classList.remove(this.inactiveButtonClass)}},{key:"_setEventListeners",value:function(){var e=this;this.formElement.addEventListener("submit",(function(e){e.preventDefault()})),this.inputList.forEach((function(t){t.addEventListener("input",(function(){e._toggleButtonState(),e._checkInputValidity(t)}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&_(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,k(r.key),r)}}function k(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==w(t)?t:t+""}var L=function(){return e=function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=r,this._renderer=o,this.container=document.querySelector(n)},(t=[{key:"renderItems",value:function(){var e=this;this.items.forEach((function(t){return e._renderer(t)}))}},{key:"addItem",value:function(e){this.container.prepend(e)}}])&&g(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),q=document.querySelector("#popup-profile"),C=(document.querySelector(".profile__name"),document.querySelector(".profile__about"),document.querySelector("#profile-input-name"),document.querySelector("#profile-input-about"),document.querySelector("#popup-add-card")),j=(document.querySelector(".elements"),document.querySelector("#input-card-title"),document.querySelector("#input-card-url"),document.querySelector(".popup__image-title")),O=document.querySelector(".popup__image"),P=document.querySelector("#popup-show-picture"),B=document.querySelector("#overlay");function I(){q.classList.remove("popup__opener"),B.style.display="none",document.removeEventListener("click",x),document.removeEventListener("keydown",V)}function T(){C.classList.remove("popup__opener"),B.style.display="none",document.removeEventListener("click",x),document.removeEventListener("keydown",V)}function R(){P.classList.remove("popup__opener"),document.removeEventListener("click",x),document.removeEventListener("keydown",V)}function x(e){e.target.classList.contains("popup__opener")&&(I(),T(),R())}function V(e){"Escape"===e.key&&(I(),T(),R())}function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,W(r.key),r)}}function W(e){var t=function(e,t){if("object"!=D(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==D(t)?t:t+""}function A(e,t,n){return t=F(t),function(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,U()?Reflect.construct(t,n||[],F(e).constructor):t.apply(e,n))}function U(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(U=function(){return!!e})()}function N(){return N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=F(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},N.apply(this,arguments)}function F(e){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},F(e)}function M(e,t){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},M(e,t)}var Y=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=A(this,t,[n]))._handleFormSubmit=e,r._popup=document.querySelector(n),r._form=r._popup.querySelector(".popup__edit-form"),r._inputList=Array.from(r._form.querySelectorAll(".popup__input")),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M(e,t)}(t,e),n=t,(r=[{key:"_setEventListeners",value:function(){var e=this;N(F(t.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault();var n=e._getInputValues();e._handleFormSubmit.bind(t,n)}))}},{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){return e._formValues[t.name]=t.value})),this._formValues}},{key:"close",value:function(){N(F(t.prototype),"close",this).call(this)}}])&&z(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(r);function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,J(r.key),r)}}function J(e){var t=function(e,t){if("object"!=G(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=G(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==G(t)?t:t+""}var K=function(){return e=function e(t){var n=t.nameSelector,r=t.aboutSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameElement=document.querySelector(n),this._aboutElement=document.querySelector(r)},(t=[{key:"getUserInfo",value:function(){return{name:this._nameElement.textContent,about:this._aboutElement.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;this._nameElement.textContent=t,this._aboutElement.textContent=n}}])&&H(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),Q=document.querySelector("#profile-edit-button"),X=document.querySelector("#close-profile-form"),Z=document.querySelector("#profile-form"),$=(document.querySelector("#profile-submit"),document.querySelector("#profile-add-button")),ee=document.querySelector("#close-addcard-form"),te=document.querySelector(".template__card"),ne=document.querySelector(".elements"),re=document.querySelector("#addcard-form"),oe=(document.querySelector("#addcard-submit"),document.querySelector("#close-popup-image")),ie=[{name:"Valle de Yosemite",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/yosemite.jpg"},{name:"Lago Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lake-louise.jpg"},{name:"Montañas Calvas",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/latemar.jpg"},{name:"Parque Nacional de la Vanoise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lago.jpg"}],ue=new L({items:ie,renderer:function(){}},".elements"),ce=function(e,t){var n=document.querySelector("#popup-show-picture"),r=n.querySelector(".popup__image"),o=n.querySelector(".popup__image-title");r.src=t,r.alt=e,o.textContent=e,n.classList.add("popup_opener")},ae=new K({nameSelector:".profile__name",aboutSelector:".profile__about"});function le(e){e.preventDefault();var t,n,r,o,i,u,c,a=document.querySelector("#input-card-title"),l=document.querySelector("#input-card-url"),s=(t=a.value,n=l.value,r=te.content.querySelector(".elements__card").cloneNode(!0),o=r.querySelector(".elements__card-image"),i=r.querySelector(".elements__card-title"),u=r.querySelector(".elements__card-heart"),c=r.querySelector(".elements__card-delete"),o.src=n,o.alt=t,i.textContent=t,u.addEventListener("click",(function(){return u.classList.toggle("elements__card-heart_active"),r})),c.addEventListener("click",(function(){r.remove()})),o.addEventListener("click",(function(){!function(e,t){O.src=t,j.textContent=e,P.classList.add("popup__opener"),document.addEventListener("click",x),document.addEventListener("keydown",V)}(t,n)})),r);ne.prepend(s),pe.close()}ie.forEach((function(e){var t=new b(e.name,e.link,te,ce);ue.addItem(t.generateCard())}));var se=new Y((function(e,t){e.preventDefault(),console.log(t),ae.setUserInfo(t.name,t.about),this.close()}),"#popup-profile"),pe=new Y(le,"#popup-add-card");se._setEventListeners(),pe._setEventListeners(),Q.addEventListener("click",(function(){var e=ae.getUserInfo();se.open(e)})),X.addEventListener("click",(function(){return se.close()})),$.addEventListener("click",(function(){return pe.open()})),ee.addEventListener("click",(function(){return pe.close()})),oe.addEventListener("click",R),document.querySelectorAll(".popup__input").forEach((function(e){e.addEventListener("click",(function(e){e.stopPropagation()}))})),Z.addEventListener("submit",(function(e){e.preventDefault();var t=document.querySelector("#profile-input-name"),n=document.querySelector("#profile-input-about");ae.setUserInfo({name:t.value,about:n.value}),se.close()})),re.addEventListener("submit",le),new E(Z,{formSelector:".popup__edit-form",inputSelector:".popup__input",submitButtonSelector:".popup__input-submit",inactiveButtonClass:"popup__button__disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"}).enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc2NyaXB0L1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NjcmlwdC9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NjcmlwdC9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NjcmlwdC9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NjcmlwdC91dGlscy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zY3JpcHQvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zY3JpcHQvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLnBvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5wb3B1cENsb3NlQnV0dG9uID0gdGhpcy5wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtYnV0dG9uXCIpO1xuICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vcGVuID0gdGhpcy5vcGVuLmJpbmQodGhpcyk7XG4gICAgdGhpcy5jbG9zZSA9IHRoaXMuY2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuICBvcGVuKCkge1xuICAgIHRoaXMucG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9fb3BlbmVyXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuICBjbG9zZSgpIHtcbiAgICB0aGlzLnBvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfX29wZW5lclwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgaWYoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuICAgIF9pc0NsaWNrT3V0c2lkZShldnQpIHtcbiAgICAgIHJldHVybiBldnQudGFyZ2V0LmNsYXNzbGlzdC5jb250YWlucyhcInBvcHVwX19vcGVuZXJcIik7XG4gICAgfVxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgdGhpcy5wb3B1cENsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgaWYodGhpcy5faXNDbGlja091dHNpZGUpIHtcbiAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3Ipe1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuaW1hZ2UgPSB0aGlzLnBvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcbiAgICB0aGlzLmNhcHRpb24gPSB0aGlzLnBvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZS10aXRsZVwiKTtcbiAgfVxuXG4gIG9wZW4odGl0bGUsIGxpbmspIHtcbiAgICB0aGlzLmltYWdlLnNyYyA9IGxpbms7XG4gICAgdGhpcy5pbWFnZS5hbHQgPSB0aXRsZTtcbiAgICB0aGlzLmNhcHRpb24udGV4dENvbnRlbnQgPSB0aXRsZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn0iLCJpbXBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9IGZyb20gXCIuL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5cblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IodGl0bGUsIGxpbmssIHRlbXBsYXRlLCBoYW5kbGVDYXJkQ2xpY2ssICl7XG4gICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgIHRoaXMubGluayA9IGxpbms7XG4gICAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuICAgIHRoaXMuaGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuXG5cbiAgICB0aGlzLl9oYW5kbGVMaWtlID0gdGhpcy5faGFuZGxlTGlrZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2hhbmRsZVJlbW92ZUNhcmQgPSB0aGlzLl9oYW5kbGVSZW1vdmVDYXJkLmJpbmQodGhpcyk7XG4gICAgdGhpcy5faGFuZGxlT3BlbkltYWdlQ2FyZCA9IHRoaXMuX2hhbmRsZU9wZW5JbWFnZUNhcmQuYmluZCh0aGlzKTtcbiAgfVxuXG5cblxuICBfZ2V0Q2FyZENsb25lKCl7XG4gICB0aGlzLmNhcmQgPSB0aGlzLnRlbXBsYXRlLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY2FyZFwiKS5jbG9uZU5vZGUodHJ1ZSk7XG4gIH1cblxuXG4gIF9oYW5kbGVMaWtlID0gKCkgPT4ge1xuICAgIGNvbnN0IGxpa2VCdXR0b24gPSB0aGlzLmNhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY2FyZC1oZWFydFwiKTtcbiAgICBsaWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJlbGVtZW50c19fY2FyZC1oZWFydF9hY3RpdmVcIik7XG4gIH1cblxuICBfaGFuZGxlUmVtb3ZlQ2FyZCA9ICgpID0+e1xuICAgIHRoaXMuY2FyZC5yZW1vdmUoKTtcbiAgfVxuICBfaGFuZGxlT3BlbkltYWdlQ2FyZCA9ICgpID0+IHtcbiAgICBjb25zdCBjYXJkSW1hZ2UgPSB0aGlzLmNhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY2FyZC1pbWFnZVwiKTtcbiAgICBjb25zdCBQb3B1cFdpdGhJbWFnZUNhcmQgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjcG9wdXAtc2hvdy1waWN0dXJlXCIpO1xuICAgIGNhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgUG9wdXBXaXRoSW1hZ2VDYXJkLm9wZW4odGhpcy50aXRsZSwgdGhpcy5saW5rKTtcbiAgICB9KVxuXG4gIH1cblxuICBfc2V0UHJvcGVydGllcygpe1xuICAgIHRoaXMuY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19jYXJkLXRpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy50aXRsZTtcbiAgICBjb25zdCBjYXJkSW1hZ2UgPSB0aGlzLmNhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY2FyZC1pbWFnZVwiKTtcbiAgICBjYXJkSW1hZ2Uuc3JjID0gdGhpcy5saW5rO1xuICAgIGNhcmRJbWFnZS5hbHQgPSB0aGlzLnRpdGxlO1xuICB9XG4gICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLmNhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY2FyZC1oZWFydFwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlTGlrZSk7XG4gICAgdGhpcy5jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2NhcmQtZGVsZXRlXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVSZW1vdmVDYXJkKTtcbiAgICB0aGlzLmNhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY2FyZC1pbWFnZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4geyB0aGlzLl9oYW5kbGVPcGVuSW1hZ2VDYXJkKHRoaXMudGl0bGUsIHRoaXMubGluayk7XG4gICB9KTtcbiAgIH1cblxuICAgZ2VuZXJhdGVDYXJkKCl7XG4gICAgdGhpcy5fZ2V0Q2FyZENsb25lKCk7XG4gICAgdGhpcy5fc2V0UHJvcGVydGllcygpO1xuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICByZXR1cm4gdGhpcy5jYXJkO1xuICAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihmb3JtRWxlbWVudCwgc2V0dGluZ3MpIHtcbiAgICB0aGlzLmZvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5mb3JtU2VsZWN0b3IgPSBzZXR0aW5ncy5mb3JtU2VsZWN0b3I7XG4gICAgdGhpcy5pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLmlucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLmVycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xuICAgIHRoaXMuYnV0dG9uRWxlbWVudCA9IHRoaXMuZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcbiAgICB0aGlzLmlucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLmZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5pbnB1dFNlbGVjdG9yKVxuICAgKTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICAvLyBsb2dpYyB0byBzaG93IG1lc3NhZ2UgZXJyb3JcXFxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5lcnJvckNsYXNzKTtcbiAgfVxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgLy8gbG9naWMgdG8gaGlkZSBtZXNzYWdlIGVycm9yXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgfVxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKXtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfWVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICAvLyBsb2dpYyB0byBjaGVjayBpZiBpbnB1dCBpcyBpbnZhbGlkXG4gICAgcmV0dXJuIHRoaXMuaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH1cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIC8vIGxvZ2ljIHRvIGRpc2FibGUgYnV0dG9uXG4gICAgaWYodGhpcy5faGFzSW52YWxpZElucHV0KCkpe1xuICAgICAgdGhpcy5idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB9XG4gIH1cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgICB0aGlzLmlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gIH1cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG5cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlcn0sIHNlbGVjdG9yKSB7XG4gICAgdGhpcy5pdGVtcz0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICB9XG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xuICB9XG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn0iLCJpbXBvcnQge2NhcmRHZW5lcmF0b3J9IGZyb20gXCIuLi9zcmMvaW5kZXguanNcIjtcblxuY29uc3QgcG9wVXBQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3B1cC1wcm9maWxlXCIpO1xuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG5jb25zdCBwcm9maWxlQWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Fib3V0XCIpO1xuY29uc3QgaW5wdXRQcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1pbnB1dC1uYW1lXCIpO1xuY29uc3QgaW5wdXRQcm9maWxlQWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtaW5wdXQtYWJvdXRcIik7XG5jb25zdCBwb3BVcEFkZENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwLWFkZC1jYXJkXCIpO1xuY29uc3QgY2FyZEFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzXCIpO1xuY29uc3QgaW5wdXRDYXJkVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2lucHV0LWNhcmQtdGl0bGVcIik7XG5jb25zdCBpbnB1dENhcmRMaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbnB1dC1jYXJkLXVybFwiKTtcbmNvbnN0IHBvcFVwVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZS10aXRsZVwiKTtcbmNvbnN0IHBvcFVwSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKVxuY29uc3QgcG9wVXBTaG93UGljdHVyZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXAtc2hvdy1waWN0dXJlXCIpO1xuY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjb3ZlcmxheVwiKTtcblxuXG4vLyBGdW5jdGlvbiB0byBvcGVuIHRoZSBwcm9maWxlIGZvcm1cbmZ1bmN0aW9uIGhhbmRsZU9wZW5Qcm9maWxlRm9ybSgpIHtcbiAgcG9wVXBQcm9maWxlLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9fb3BlbmVyXCIpO1xuICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVDbG9zZU91dHNpZGUpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVDbG9zZU9uRXNjYXBlKTtcbn1cblxuLy8gRnVuY3Rpb24gdG8gY2xvc2UgdGhlIHByb2ZpbGUgZm9ybVxuZnVuY3Rpb24gaGFuZGxlQ2xvc2VQcm9maWxlRm9ybSgpIHtcbiAgcG9wVXBQcm9maWxlLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9fb3BlbmVyXCIpO1xuICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUNsb3NlT3V0c2lkZSk7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUNsb3NlT25Fc2NhcGUpO1xufVxuXG4vLyBGdW5jdGlvbiB0byBvcGVuIHRoZSBjYXJkIGZvcm1cbmZ1bmN0aW9uIGhhbmRsZU9wZW5DYXJkRm9ybSgpIHtcbiAgcG9wVXBBZGRDYXJkLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9fb3BlbmVyXCIpO1xuICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVDbG9zZU91dHNpZGUpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVDbG9zZU9uRXNjYXBlKTtcbn1cblxuLy8gRnVuY3Rpb24gdG8gY2xvc2UgdGhlIGNhcmQgZm9ybVxuZnVuY3Rpb24gaGFuZGxlQ2xvc2VDYXJkRm9ybSgpIHtcbiAgcG9wVXBBZGRDYXJkLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9fb3BlbmVyXCIpO1xuICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUNsb3NlT3V0c2lkZSk7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUNsb3NlT25Fc2NhcGUpO1xufVxuXG4vLyBGdW5jdGlvbiB0byBvcGVuIHRoZSBwb3B1cCBpbWFnZVxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZU9wZW5JbWFnZSh0aXRsZSwgbGluaykge1xuICBwb3BVcEltYWdlLnNyYyA9IGxpbms7XG4gIHBvcFVwVGl0bGUudGV4dENvbnRlbnQgPSB0aXRsZTtcbiAgcG9wVXBTaG93UGljdHVyZS5jbGFzc0xpc3QuYWRkKFwicG9wdXBfX29wZW5lclwiKTtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUNsb3NlT3V0c2lkZSk7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUNsb3NlT25Fc2NhcGUpO1xufVxuXG4vLyBGdW5jdGlvbiB0byBjbG9zZSB0aGUgcG9wdXAgaW1hZ2VcbmZ1bmN0aW9uIGhhbmRsZUNsb3NlSW1hZ2UoKSB7XG4gIHBvcFVwU2hvd1BpY3R1cmUuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX19vcGVuZXJcIik7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVDbG9zZU91dHNpZGUpO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVDbG9zZU9uRXNjYXBlKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZVN1Ym1pdCAoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIGlmIChpbnB1dFByb2ZpbGVOYW1lLnZhbHVlLnRyaW0oKSA9PT0gXCJcIiB8fCBpbnB1dFByb2ZpbGVBYm91dC52YWx1ZS50cmltKCkgPT09IFwiXCIpIHtcbiAgICAvLyBzaG93IHRoZSBtZXNzYWdlIGlmIHRoZSBmaWVsZHMgYXJlIGVtcHR5XG4gICAgYWxlcnQoXCJQbGVhc2UgZmlsbCBpbiB0aGUgZmllbGRzLlwiKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyB1cGRhdGUgdGhlIHByb2ZpbGVcbiAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBpbnB1dFByb2ZpbGVOYW1lLnZhbHVlO1xuICBwcm9maWxlQWJvdXQudGV4dENvbnRlbnQgPSBpbnB1dFByb2ZpbGVBYm91dC52YWx1ZTtcbiAgLy8gY2xvc2UgdGhlIGZvcm0gYWZ0ZXIgc3VibWl0aW5nXG4gIGhhbmRsZUNsb3NlUHJvZmlsZUZvcm0oKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZFN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cbmlmIChpbnB1dENhcmRUaXRsZS52YWx1ZS50cmltKCkgPT09IFwiXCIgfHwgaW5wdXRDYXJkTGluay52YWx1ZS50cmltKCkgPT09IFwiXCIgKSB7XG4gICAgLy8gc2hvdyB0aGUgbWVzc2FnIGlmIHRoZSBmaWVsZCBhcmUgZW1wdHlcbiAgICBhbGVydChcIlBsZWFzZSBmaWxsIGluIHRoZSBmaWVsZHMuXCIpO1xuICAgIHJldHVybjtcbn1cblxuXG4gIGNvbnN0IG5ld0NhcmQgPSBjYXJkR2VuZXJhdG9yKGlucHV0Q2FyZFRpdGxlLnZhbHVlLCBpbnB1dENhcmRMaW5rLnZhbHVlKTtcbiAgY29uc29sZS5sb2coaW5wdXRDYXJkTGluay52YWx1ZSk7XG4gIGNhcmRBcmVhLnByZXBlbmQobmV3Q2FyZCk7XG4gIGhhbmRsZUNsb3NlQ2FyZEZvcm0oKTtcbiAgLy8gY2xlYXIgdGhlIGZvcm1cbiAgaW5wdXRDYXJkVGl0bGUudmFsdWUgPSBcIlwiO1xuICBpbnB1dENhcmRMaW5rLnZhbHVlID0gXCJcIjtcbn1cblxuLy8gZnVuY3Rpb24gdG8gaGFuZGxlIGNsb3NpbmcgZm9ybXMgd2hlbiBjbGlja2luZyBvdXRzaWRlIG9yIHByZXNzaW5nIGVzY2FwZSBrZXlcbmZ1bmN0aW9uIGhhbmRsZUNsb3NlT3V0c2lkZShldnQpIHtcbiAgaWYoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9fb3BlbmVyXCIpKXtcbiAgICBoYW5kbGVDbG9zZVByb2ZpbGVGb3JtKCk7XG4gICAgaGFuZGxlQ2xvc2VDYXJkRm9ybSgpO1xuICAgIGhhbmRsZUNsb3NlSW1hZ2UoKTtcbiAgfVxufVxuXG4vLyBjbG9zZSB0aGUgZm9ybSB3aXRoIGVzY2FwZSBrZXlcbmZ1bmN0aW9uIGhhbmRsZUNsb3NlT25Fc2NhcGUoZXZ0KSB7XG4gIGlmKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpe1xuICAgIGhhbmRsZUNsb3NlUHJvZmlsZUZvcm0oKTtcbiAgICBoYW5kbGVDbG9zZUNhcmRGb3JtKCk7XG4gICAgaGFuZGxlQ2xvc2VJbWFnZSgpO1xuICB9XG59XG5cbmV4cG9ydCB7IGhhbmRsZU9wZW5Qcm9maWxlRm9ybSwgaGFuZGxlQ2xvc2VQcm9maWxlRm9ybSwgaGFuZGxlT3BlbkNhcmRGb3JtLCBoYW5kbGVDbG9zZUNhcmRGb3JtLCBoYW5kbGVDbG9zZUltYWdlLCBoYW5kbGVQcm9maWxlU3VibWl0LCBoYW5kbGVBZGRDYXJkU3VibWl0fSIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoaGFuZGxlRm9ybVN1Ym1pdCwgcG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZWRpdC1mb3JtXCIpO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKSk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHRoaXMuX2dldElucHV0VmFsdWVzKCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0LmJpbmQoZXZ0LCBpbnB1dFZhbHVlcyk7XG4gICAgfSk7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcbiAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4gdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlKTtcbiAgICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XG4gICAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAvLyB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gIH1cbn1cblxuIiwiZXhwb3J0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IgKHsgbmFtZVNlbGVjdG9yLCBhYm91dFNlbGVjdG9yfSkge1xuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Fib3V0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWJvdXRTZWxlY3Rvcik7XG4gIH1cblxuXG5nZXRVc2VySW5mbygpIHtcbiAgcmV0dXJuIHtcbiAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICBhYm91dDogdGhpcy5fYWJvdXRFbGVtZW50LnRleHRDb250ZW50XG4gIH07XG59XG5cbnNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXR9KSB7XG4gIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcbiAgdGhpcy5fYWJvdXRFbGVtZW50LnRleHRDb250ZW50ID0gYWJvdXQ7XG59XG5cbn0iLCJpbXBvcnQgXCIuL3N0eWxlcy9pbmRleC5jc3NcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9zY3JpcHQvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL3NjcmlwdC9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vc2NyaXB0L1NlY3Rpb24uanNcIjtcbmltcG9ydCB7aGFuZGxlT3BlblByb2ZpbGVGb3JtLCBoYW5kbGVDbG9zZVByb2ZpbGVGb3JtLCBoYW5kbGVPcGVuQ2FyZEZvcm0sIGhhbmRsZUNsb3NlQ2FyZEZvcm0gLCBoYW5kbGVPcGVuSW1hZ2UsIGhhbmRsZUNsb3NlSW1hZ2V9IGZyb20gXCIuLi9zY3JpcHQvdXRpbHMuanNcIjtcbmltcG9ydCAgUG9wdXBXaXRoRm9ybSAgZnJvbSBcIi4uL3NjcmlwdC9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgeyBVc2VySW5mbyB9IGZyb20gXCIuLi9zY3JpcHQvVXNlckluZm8uanNcIjtcblxuY29uc3QgYnV0dG9uUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IGJ1dHRvbkNsb3NlUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2xvc2UtcHJvZmlsZS1mb3JtXCIpO1xuY29uc3QgZm9ybVByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZm9ybVwiKTtcbmNvbnN0IGZvcm1Qcm9maWxlU3VibWl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXN1Ym1pdFwiKTtcbmNvbnN0IGJ1dHRvbkFkZENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYWRkLWJ1dHRvblwiKTtcbmNvbnN0IGJ1dHRvbkNsb3NlQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2xvc2UtYWRkY2FyZC1mb3JtXCIpO1xuY29uc3QgdGVtcGxhdGVDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50ZW1wbGF0ZV9fY2FyZFwiKTtcbmNvbnN0IGNhcmRBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c1wiKTtcbmNvbnN0IGZvcm1DYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGRjYXJkLWZvcm1cIik7XG5jb25zdCBidXR0b25TdWJtaXRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGRjYXJkLXN1Ym1pdFwiKTtcbmNvbnN0IGNsb3NlSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Nsb3NlLXBvcHVwLWltYWdlXCIpO1xuY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJWYWxsZSBkZSBZb3NlbWl0ZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9uZXctbWFya2V0cy9XRUJfc3ByaW50XzUvRVMveW9zZW1pdGUuanBnXCJcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2xha2UtbG91aXNlLmpwZ1wiXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIk1vbnRhw7FhcyBDYWx2YXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2JhbGQtbW91bnRhaW5zLmpwZ1wiXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2xhdGVtYXIuanBnXCJcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiUGFycXVlIE5hY2lvbmFsIGRlIGxhIFZhbm9pc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL3Zhbm9pc2UuanBnXCJcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2xhZ28uanBnXCJcbiAgfVxuXTtcblxuY29uc3Qgc2VjdGlvbkNhcmRzID0gbmV3IFNlY3Rpb24oe1xuICBpdGVtczogaW5pdGlhbENhcmRzLFxuICByZW5kZXJlcjogZnVuY3Rpb24gKCkge30sXG59LCBcIi5lbGVtZW50c1wiKTtcblxuLy8gaGFuZGxlIGNhcmQgY2xpY2sgc2tldGNoXG5jb25zdCBoYW5kbGVDYXJkQ2xpY2sgPSAodGl0bGUsIGxpbmspID0+IHtcbiAgY29uc3QgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwLXNob3ctcGljdHVyZVwiKTtcbiAgY29uc3QgcG9wdXBJbWFnZSA9IHBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xuICBjb25zdCBwb3B1cFRpdGxlID0gcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2UtdGl0bGVcIik7XG5cbiAgcG9wdXBJbWFnZS5zcmMgPSBsaW5rO1xuICBwb3B1cEltYWdlLmFsdCA9IHRpdGxlO1xuICBwb3B1cFRpdGxlLnRleHRDb250ZW50ID0gdGl0bGU7XG5cbiAgcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lclwiKTtcbn1cblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX25hbWVcIixcbiAgYWJvdXRTZWxlY3RvcjogXCIucHJvZmlsZV9fYWJvdXRcIlxufSk7XG5cbmV4cG9ydCBmdW5jdGlvbiBjYXJkR2VuZXJhdG9yKHRpdGxlLCBsaW5rKSB7XG4gY29uc3QgY2FyZCA9IHRlbXBsYXRlQ2FyZC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2NhcmRcIikuY2xvbmVOb2RlKHRydWUpO1xuICBjb25zdCBjYXJkSW1hZ2UgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2NhcmQtaW1hZ2VcIik7XG4gIGNvbnN0IGNhcmRUaXRsZSA9IGNhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY2FyZC10aXRsZVwiKTtcbiAgY29uc3QgbGlrZUJ1dHRvbiA9IGNhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY2FyZC1oZWFydFwiKTtcbiAgY29uc3QgZGVsZXRlQnV0dG9uID0gY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19jYXJkLWRlbGV0ZVwiKTtcbiAgY2FyZEltYWdlLnNyYyA9IGxpbms7XG4gIGNhcmRJbWFnZS5hbHQgPSB0aXRsZTtcbiAgY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGl0bGU7XG4gIC8vUmVhc3NpZ25pbmcgRXZlbnRzXG4gIGxpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiZWxlbWVudHNfX2NhcmQtaGVhcnRfYWN0aXZlXCIpO1xuXG4gICAgICByZXR1cm4gY2FyZDtcbiAgfSk7XG4gIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcbiAgICBjYXJkLnJlbW92ZSgpO1xuICB9KTtcbiAgY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpe1xuICAgIGhhbmRsZU9wZW5JbWFnZSh0aXRsZSwgbGluayk7XG4gIH0pO1xuXG4gIHJldHVybiBjYXJkO1xufVxuXG5pbml0aWFsQ2FyZHMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmQoZWxlbWVudC5uYW1lLCBlbGVtZW50LmxpbmssIHRlbXBsYXRlQ2FyZCwgaGFuZGxlQ2FyZENsaWNrKTtcbiAgc2VjdGlvbkNhcmRzLmFkZEl0ZW0obmV3Q2FyZC5nZW5lcmF0ZUNhcmQoKSk7XG59KVxuXG4vLyBGb3JtIHN1Ym1pdCBoYW5kbGVyc1xuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZVN1Ym1pdChldnQpe1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgaW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWlucHV0LW5hbWVcIik7XG4gIGNvbnN0IGlucHV0QWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtaW5wdXQtYWJvdXRcIik7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtuYW1lOmlucHV0TmFtZS52YWx1ZSwgYWJvdXQ6aW5wdXRBYm91dC52YWx1ZX0pO1xuICBwcm9maWxlUG9wdXAuY2xvc2UoKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZFN1Ym1pdChldnQpe1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgaW5wdXRDYXJkVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2lucHV0LWNhcmQtdGl0bGVcIik7XG4gIGNvbnN0IGlucHV0Q2FyZExpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2lucHV0LWNhcmQtdXJsXCIpO1xuICBjb25zdCBuZXdDYXJkID0gY2FyZEdlbmVyYXRvcihpbnB1dENhcmRUaXRsZS52YWx1ZSwgaW5wdXRDYXJkTGluay52YWx1ZSk7XG4gIGNhcmRBcmVhLnByZXBlbmQobmV3Q2FyZCk7XG4gIGFkZENhcmRQb3B1cC5jbG9zZSgpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVGb3JtU3VibWl0KGV2dCxpbnB1dFZhbHVlcyl7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zb2xlLmxvZyhpbnB1dFZhbHVlcyk7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKGlucHV0VmFsdWVzLm5hbWUsIGlucHV0VmFsdWVzLmFib3V0KTtcbiAgdGhpcy5jbG9zZSgpO1xufVxuXG4vLyBFdmVudCBsaXN0ZW5lcnMgY29maWd1cmF0aW9uXG5jb25zdCBwcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShoYW5kbGVGb3JtU3VibWl0LCBcIiNwb3B1cC1wcm9maWxlXCIpO1xuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oaGFuZGxlQWRkQ2FyZFN1Ym1pdCwgXCIjcG9wdXAtYWRkLWNhcmRcIilcblxuLy8gU2V0IGV2ZW50IGxpc3RlbmVyZXMgZm9yIHRoZSBwb3B1cHNcbnByb2ZpbGVQb3B1cC5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmFkZENhcmRQb3B1cC5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gdXNlciBJbmZvIGluc3RhbmNlXG5idXR0b25Qcm9maWxlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNvbnN0IHVzZXJJbmZvRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIHByb2ZpbGVQb3B1cC5vcGVuKHVzZXJJbmZvRGF0YSlcbn0pO1xuXG4vLyBldmVudHMgZm9yIG9wZW4gYW5kIGNsb3NlZFxuYnV0dG9uQ2xvc2VQcm9maWxlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBwcm9maWxlUG9wdXAuY2xvc2UoKSk7XG5idXR0b25BZGRDYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBhZGRDYXJkUG9wdXAub3BlbigpKVxuYnV0dG9uQ2xvc2VDYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBhZGRDYXJkUG9wdXAuY2xvc2UoKSk7XG5jbG9zZUltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVDbG9zZUltYWdlKTtcblxuXG5cblxuY29uc3QgZm9ybUlucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpO1xuZm9ybUlucHV0cy5mb3JFYWNoKGlucHV0ID0+IHtcbiAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICB9KVxufSlcblxuLy8gZm9ybSBldmVudCBsaXN0ZW5lcnNcbmZvcm1Qcm9maWxlLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlUHJvZmlsZVN1Ym1pdCk7XG5mb3JtQ2FyZC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUFkZENhcmRTdWJtaXQpO1xuXG5cbmNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1Qcm9maWxlLCB7XG4gIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2VkaXQtZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dC1zdWJtaXRcIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYnV0dG9uX19kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJwb3B1cF9fZXJyb3JfdmlzaWJsZVwiLFxufSk7XG5cbnByb2ZpbGVGb3JtVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKClcblxuXG4iXSwibmFtZXMiOlsiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsInBvcHVwRWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInBvcHVwQ2xvc2VCdXR0b24iLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwib3BlbiIsImNsb3NlIiwia2V5IiwidmFsdWUiLCJjbGFzc0xpc3QiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsInRhcmdldCIsImNsYXNzbGlzdCIsImNvbnRhaW5zIiwiX3RoaXMiLCJfaXNDbGlja091dHNpZGUiLCJQb3B1cFdpdGhJbWFnZSIsIl9Qb3B1cCIsIl9jYWxsU3VwZXIiLCJpbWFnZSIsImNhcHRpb24iLCJfaW5oZXJpdHMiLCJ0aXRsZSIsImxpbmsiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIl9nZXQiLCJfZ2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJjYWxsIiwiQ2FyZCIsInRlbXBsYXRlIiwiaGFuZGxlQ2FyZENsaWNrIiwiX2RlZmluZVByb3BlcnR5IiwiY2FyZCIsInRvZ2dsZSIsImNhcmRJbWFnZSIsIlBvcHVwV2l0aEltYWdlQ2FyZCIsIl9oYW5kbGVMaWtlIiwiX2hhbmRsZVJlbW92ZUNhcmQiLCJfaGFuZGxlT3BlbkltYWdlQ2FyZCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfdGhpczIiLCJfZ2V0Q2FyZENsb25lIiwiX3NldFByb3BlcnRpZXMiLCJzZXRFdmVudExpc3RlbmVycyIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsInNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJidXR0b25FbGVtZW50IiwiaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsImNvbmNhdCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwic29tZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJwcmV2ZW50RGVmYXVsdCIsImZvckVhY2giLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiU2VjdGlvbiIsIl9yZWYiLCJzZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJjb250YWluZXIiLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJwb3BVcFByb2ZpbGUiLCJwb3BVcEFkZENhcmQiLCJwb3BVcFRpdGxlIiwicG9wVXBJbWFnZSIsInBvcFVwU2hvd1BpY3R1cmUiLCJvdmVybGF5IiwiaGFuZGxlQ2xvc2VQcm9maWxlRm9ybSIsInN0eWxlIiwiZGlzcGxheSIsImhhbmRsZUNsb3NlT3V0c2lkZSIsImhhbmRsZUNsb3NlT25Fc2NhcGUiLCJoYW5kbGVDbG9zZUNhcmRGb3JtIiwiaGFuZGxlQ2xvc2VJbWFnZSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfcG9wdXAiLCJfZm9ybSIsIl9pbnB1dExpc3QiLCJpbnB1dFZhbHVlcyIsIl9nZXRJbnB1dFZhbHVlcyIsIl90aGlzMyIsIl9mb3JtVmFsdWVzIiwiaW5wdXQiLCJuYW1lIiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJhYm91dFNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2Fib3V0RWxlbWVudCIsImFib3V0IiwiX3JlZjIiLCJidXR0b25Qcm9maWxlIiwiYnV0dG9uQ2xvc2VQcm9maWxlIiwiZm9ybVByb2ZpbGUiLCJidXR0b25BZGRDYXJkIiwiYnV0dG9uQ2xvc2VDYXJkIiwidGVtcGxhdGVDYXJkIiwiY2FyZEFyZWEiLCJmb3JtQ2FyZCIsImNsb3NlSW1hZ2UiLCJpbml0aWFsQ2FyZHMiLCJzZWN0aW9uQ2FyZHMiLCJwb3B1cCIsInBvcHVwSW1hZ2UiLCJwb3B1cFRpdGxlIiwidXNlckluZm8iLCJoYW5kbGVBZGRDYXJkU3VibWl0IiwiY2FyZFRpdGxlIiwibGlrZUJ1dHRvbiIsImRlbGV0ZUJ1dHRvbiIsImlucHV0Q2FyZFRpdGxlIiwiaW5wdXRDYXJkTGluayIsIm5ld0NhcmQiLCJoYW5kbGVPcGVuSW1hZ2UiLCJhZGRDYXJkUG9wdXAiLCJhZGRJdGVtIiwiZ2VuZXJhdGVDYXJkIiwicHJvZmlsZVBvcHVwIiwiY29uc29sZSIsImxvZyIsInNldFVzZXJJbmZvIiwidXNlckluZm9EYXRhIiwiZ2V0VXNlckluZm8iLCJldmVudCIsInN0b3BQcm9wYWdhdGlvbiIsImlucHV0TmFtZSIsImlucHV0QWJvdXQiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==